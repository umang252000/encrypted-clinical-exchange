{"ast":null,"code":"var _jsxFileName = \"/workspaces/encrypted-clinical-exchange/clinician-ui/src/Login.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\n\n// ----------------------------------\n// Helper: decode JWT payload (DEV)\n// ----------------------------------\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction parseJwtPayload(token) {\n  try {\n    const base64Url = token.split(\".\")[1];\n    if (!base64Url) return null;\n    const base64 = base64Url.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    const jsonPayload = decodeURIComponent(atob(base64).split(\"\").map(c => \"%\" + (\"00\" + c.charCodeAt(0).toString(16)).slice(-2)).join(\"\"));\n    return JSON.parse(jsonPayload);\n  } catch {\n    return null;\n  }\n}\nexport default function Login({\n  onToken\n}) {\n  _s();\n  const [token, setToken] = useState(\"\");\n  const [decoded, setDecoded] = useState(null);\n  const [message, setMessage] = useState(\"\");\n\n  // ----------------------------------\n  // Load saved token on mount\n  // ----------------------------------\n  useEffect(() => {\n    const saved = sessionStorage.getItem(\"jwt\");\n    if (saved) {\n      setToken(saved);\n      setDecoded(parseJwtPayload(saved));\n    }\n  }, []);\n\n  // ----------------------------------\n  // Decode JWT live when typing\n  // ----------------------------------\n  useEffect(() => {\n    setDecoded(parseJwtPayload(token));\n  }, [token]);\n\n  // ----------------------------------\n  // Helpers\n  // ----------------------------------\n  const isExpired = (decoded === null || decoded === void 0 ? void 0 : decoded.exp) && decoded.exp * 1000 < Date.now();\n  const isValid = decoded && decoded.sub && decoded.role && !isExpired;\n\n  // ----------------------------------\n  // Actions\n  // ----------------------------------\n  function handleSetToken() {\n    if (!isValid) {\n      setMessage(\"âŒ Invalid or expired token\");\n      onToken(\"\");\n      return;\n    }\n    onToken(token);\n    setMessage(\"âœ… Token applied successfully\");\n  }\n  function handleClear() {\n    setToken(\"\");\n    setDecoded(null);\n    onToken(\"\");\n    setMessage(\"ðŸ”„ Token cleared\");\n  }\n\n  // ----------------------------------\n  // UI\n  // ----------------------------------\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      marginBottom: 14\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      style: {\n        width: 520\n      },\n      placeholder: \"Paste JWT token here (dev)\",\n      value: token,\n      onChange: e => setToken(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      style: {\n        marginLeft: 8\n      },\n      onClick: handleSetToken,\n      disabled: !token,\n      children: \"Set Token\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      style: {\n        marginLeft: 8\n      },\n      onClick: handleClear,\n      children: \"Clear\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 8,\n        color: isValid ? \"green\" : \"#d93025\"\n      },\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }, this), decoded && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 10,\n        padding: 8,\n        background: \"#f5f5f5\",\n        borderRadius: 6,\n        width: 520\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Decoded Token\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"User: \", /*#__PURE__*/_jsxDEV(\"b\", {\n          children: decoded.sub\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 22\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Role: \", /*#__PURE__*/_jsxDEV(\"b\", {\n          children: decoded.role\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 22\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }, this), decoded.exp && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Expires:\", \" \", /*#__PURE__*/_jsxDEV(\"b\", {\n          style: {\n            color: isExpired ? \"#d93025\" : \"green\"\n          },\n          children: new Date(decoded.exp * 1000).toLocaleString()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 15\n        }, this), isExpired && \" âš \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"shWtd2rO+FJM0VubONBSDAstYiI=\");\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","parseJwtPayload","token","base64Url","split","base64","replace","jsonPayload","decodeURIComponent","atob","map","c","charCodeAt","toString","slice","join","JSON","parse","Login","onToken","_s","setToken","decoded","setDecoded","message","setMessage","saved","sessionStorage","getItem","isExpired","exp","Date","now","isValid","sub","role","handleSetToken","handleClear","style","marginBottom","children","width","placeholder","value","onChange","e","target","fileName","_jsxFileName","lineNumber","columnNumber","marginLeft","onClick","disabled","marginTop","color","padding","background","borderRadius","toLocaleString","_c","$RefreshReg$"],"sources":["/workspaces/encrypted-clinical-exchange/clinician-ui/src/Login.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n\n// ----------------------------------\n// Helper: decode JWT payload (DEV)\n// ----------------------------------\nfunction parseJwtPayload(token) {\n  try {\n    const base64Url = token.split(\".\")[1];\n    if (!base64Url) return null;\n    const base64 = base64Url.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    const jsonPayload = decodeURIComponent(\n      atob(base64)\n        .split(\"\")\n        .map((c) => \"%\" + (\"00\" + c.charCodeAt(0).toString(16)).slice(-2))\n        .join(\"\")\n    );\n    return JSON.parse(jsonPayload);\n  } catch {\n    return null;\n  }\n}\n\nexport default function Login({ onToken }) {\n  const [token, setToken] = useState(\"\");\n  const [decoded, setDecoded] = useState(null);\n  const [message, setMessage] = useState(\"\");\n\n  // ----------------------------------\n  // Load saved token on mount\n  // ----------------------------------\n  useEffect(() => {\n    const saved = sessionStorage.getItem(\"jwt\");\n    if (saved) {\n      setToken(saved);\n      setDecoded(parseJwtPayload(saved));\n    }\n  }, []);\n\n  // ----------------------------------\n  // Decode JWT live when typing\n  // ----------------------------------\n  useEffect(() => {\n    setDecoded(parseJwtPayload(token));\n  }, [token]);\n\n  // ----------------------------------\n  // Helpers\n  // ----------------------------------\n  const isExpired =\n    decoded?.exp && decoded.exp * 1000 < Date.now();\n\n  const isValid =\n    decoded && decoded.sub && decoded.role && !isExpired;\n\n  // ----------------------------------\n  // Actions\n  // ----------------------------------\n  function handleSetToken() {\n    if (!isValid) {\n      setMessage(\"âŒ Invalid or expired token\");\n      onToken(\"\");\n      return;\n    }\n\n    onToken(token);\n    setMessage(\"âœ… Token applied successfully\");\n  }\n\n  function handleClear() {\n    setToken(\"\");\n    setDecoded(null);\n    onToken(\"\");\n    setMessage(\"ðŸ”„ Token cleared\");\n  }\n\n  // ----------------------------------\n  // UI\n  // ----------------------------------\n  return (\n    <div style={{ marginBottom: 14 }}>\n      <input\n        style={{ width: 520 }}\n        placeholder=\"Paste JWT token here (dev)\"\n        value={token}\n        onChange={(e) => setToken(e.target.value)}\n      />\n\n      <button\n        style={{ marginLeft: 8 }}\n        onClick={handleSetToken}\n        disabled={!token}\n      >\n        Set Token\n      </button>\n\n      <button style={{ marginLeft: 8 }} onClick={handleClear}>\n        Clear\n      </button>\n\n      {/* Status Message */}\n      {message && (\n        <div style={{ marginTop: 8, color: isValid ? \"green\" : \"#d93025\" }}>\n          {message}\n        </div>\n      )}\n\n      {/* Decoded Token Info */}\n      {decoded && (\n        <div\n          style={{\n            marginTop: 10,\n            padding: 8,\n            background: \"#f5f5f5\",\n            borderRadius: 6,\n            width: 520,\n          }}\n        >\n          <b>Decoded Token</b>\n          <div>User: <b>{decoded.sub}</b></div>\n          <div>Role: <b>{decoded.role}</b></div>\n          {decoded.exp && (\n            <div>\n              Expires:{\" \"}\n              <b style={{ color: isExpired ? \"#d93025\" : \"green\" }}>\n                {new Date(decoded.exp * 1000).toLocaleString()}\n              </b>\n              {isExpired && \" âš \"}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;;AAElD;AACA;AACA;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,SAASC,eAAeA,CAACC,KAAK,EAAE;EAC9B,IAAI;IACF,MAAMC,SAAS,GAAGD,KAAK,CAACE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACrC,IAAI,CAACD,SAAS,EAAE,OAAO,IAAI;IAC3B,MAAME,MAAM,GAAGF,SAAS,CAACG,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAACA,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC;IAC9D,MAAMC,WAAW,GAAGC,kBAAkB,CACpCC,IAAI,CAACJ,MAAM,CAAC,CACTD,KAAK,CAAC,EAAE,CAAC,CACTM,GAAG,CAAEC,CAAC,IAAK,GAAG,GAAG,CAAC,IAAI,GAAGA,CAAC,CAACC,UAAU,CAAC,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,EAAEC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CACjEC,IAAI,CAAC,EAAE,CACZ,CAAC;IACD,OAAOC,IAAI,CAACC,KAAK,CAACV,WAAW,CAAC;EAChC,CAAC,CAAC,MAAM;IACN,OAAO,IAAI;EACb;AACF;AAEA,eAAe,SAASW,KAAKA,CAAC;EAAEC;AAAQ,CAAC,EAAE;EAAAC,EAAA;EACzC,MAAM,CAAClB,KAAK,EAAEmB,QAAQ,CAAC,GAAGxB,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACyB,OAAO,EAAEC,UAAU,CAAC,GAAG1B,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAAC2B,OAAO,EAAEC,UAAU,CAAC,GAAG5B,QAAQ,CAAC,EAAE,CAAC;;EAE1C;EACA;EACA;EACAC,SAAS,CAAC,MAAM;IACd,MAAM4B,KAAK,GAAGC,cAAc,CAACC,OAAO,CAAC,KAAK,CAAC;IAC3C,IAAIF,KAAK,EAAE;MACTL,QAAQ,CAACK,KAAK,CAAC;MACfH,UAAU,CAACtB,eAAe,CAACyB,KAAK,CAAC,CAAC;IACpC;EACF,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA;EACA;EACA5B,SAAS,CAAC,MAAM;IACdyB,UAAU,CAACtB,eAAe,CAACC,KAAK,CAAC,CAAC;EACpC,CAAC,EAAE,CAACA,KAAK,CAAC,CAAC;;EAEX;EACA;EACA;EACA,MAAM2B,SAAS,GACb,CAAAP,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEQ,GAAG,KAAIR,OAAO,CAACQ,GAAG,GAAG,IAAI,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC;EAEjD,MAAMC,OAAO,GACXX,OAAO,IAAIA,OAAO,CAACY,GAAG,IAAIZ,OAAO,CAACa,IAAI,IAAI,CAACN,SAAS;;EAEtD;EACA;EACA;EACA,SAASO,cAAcA,CAAA,EAAG;IACxB,IAAI,CAACH,OAAO,EAAE;MACZR,UAAU,CAAC,4BAA4B,CAAC;MACxCN,OAAO,CAAC,EAAE,CAAC;MACX;IACF;IAEAA,OAAO,CAACjB,KAAK,CAAC;IACduB,UAAU,CAAC,8BAA8B,CAAC;EAC5C;EAEA,SAASY,WAAWA,CAAA,EAAG;IACrBhB,QAAQ,CAAC,EAAE,CAAC;IACZE,UAAU,CAAC,IAAI,CAAC;IAChBJ,OAAO,CAAC,EAAE,CAAC;IACXM,UAAU,CAAC,kBAAkB,CAAC;EAChC;;EAEA;EACA;EACA;EACA,oBACEzB,OAAA;IAAKsC,KAAK,EAAE;MAAEC,YAAY,EAAE;IAAG,CAAE;IAAAC,QAAA,gBAC/BxC,OAAA;MACEsC,KAAK,EAAE;QAAEG,KAAK,EAAE;MAAI,CAAE;MACtBC,WAAW,EAAC,4BAA4B;MACxCC,KAAK,EAAEzC,KAAM;MACb0C,QAAQ,EAAGC,CAAC,IAAKxB,QAAQ,CAACwB,CAAC,CAACC,MAAM,CAACH,KAAK;IAAE;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC3C,CAAC,eAEFlD,OAAA;MACEsC,KAAK,EAAE;QAAEa,UAAU,EAAE;MAAE,CAAE;MACzBC,OAAO,EAAEhB,cAAe;MACxBiB,QAAQ,EAAE,CAACnD,KAAM;MAAAsC,QAAA,EAClB;IAED;MAAAO,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,eAETlD,OAAA;MAAQsC,KAAK,EAAE;QAAEa,UAAU,EAAE;MAAE,CAAE;MAACC,OAAO,EAAEf,WAAY;MAAAG,QAAA,EAAC;IAExD;MAAAO,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,EAGR1B,OAAO,iBACNxB,OAAA;MAAKsC,KAAK,EAAE;QAAEgB,SAAS,EAAE,CAAC;QAAEC,KAAK,EAAEtB,OAAO,GAAG,OAAO,GAAG;MAAU,CAAE;MAAAO,QAAA,EAChEhB;IAAO;MAAAuB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CACN,EAGA5B,OAAO,iBACNtB,OAAA;MACEsC,KAAK,EAAE;QACLgB,SAAS,EAAE,EAAE;QACbE,OAAO,EAAE,CAAC;QACVC,UAAU,EAAE,SAAS;QACrBC,YAAY,EAAE,CAAC;QACfjB,KAAK,EAAE;MACT,CAAE;MAAAD,QAAA,gBAEFxC,OAAA;QAAAwC,QAAA,EAAG;MAAa;QAAAO,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eACpBlD,OAAA;QAAAwC,QAAA,GAAK,QAAM,eAAAxC,OAAA;UAAAwC,QAAA,EAAIlB,OAAO,CAACY;QAAG;UAAAa,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACrClD,OAAA;QAAAwC,QAAA,GAAK,QAAM,eAAAxC,OAAA;UAAAwC,QAAA,EAAIlB,OAAO,CAACa;QAAI;UAAAY,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,EACrC5B,OAAO,CAACQ,GAAG,iBACV9B,OAAA;QAAAwC,QAAA,GAAK,UACK,EAAC,GAAG,eACZxC,OAAA;UAAGsC,KAAK,EAAE;YAAEiB,KAAK,EAAE1B,SAAS,GAAG,SAAS,GAAG;UAAQ,CAAE;UAAAW,QAAA,EAClD,IAAIT,IAAI,CAACT,OAAO,CAACQ,GAAG,GAAG,IAAI,CAAC,CAAC6B,cAAc,CAAC;QAAC;UAAAZ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC7C,CAAC,EACHrB,SAAS,IAAI,IAAI;MAAA;QAAAkB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACf,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV;AAAC9B,EAAA,CA/GuBF,KAAK;AAAA0C,EAAA,GAAL1C,KAAK;AAAA,IAAA0C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}