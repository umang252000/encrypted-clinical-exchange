{"ast":null,"code":"// clinician-ui/src/Login.js\nimport React,{useState,useEffect}from'react';// Helper: decode JWT payload (dev-only)\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function parseJwtPayload(token){try{const base64Url=token.split('.')[1];if(!base64Url)return null;const base64=base64Url.replace(/-/g,'+').replace(/_/g,'/');const jsonPayload=decodeURIComponent(atob(base64).split('').map(c=>'%'+('00'+c.charCodeAt(0).toString(16)).slice(-2)).join(''));return JSON.parse(jsonPayload);}catch(_unused){return null;}}export default function Login(_ref){let{onToken}=_ref;const[token,setToken]=useState('');const[decoded,setDecoded]=useState(null);const[message,setMessage]=useState('');// When user types in input, decode live\nuseEffect(()=>{const payload=parseJwtPayload(token);setDecoded(payload);},[token]);function handleSetToken(){if(!token.trim()){setMessage(\"‚ùå No token entered\");onToken(\"\");// clear token\nreturn;}onToken(token);setMessage(\"‚úÖ Token saved successfully!\");}function handleClear(){setToken('');setDecoded(null);onToken('');setMessage(\"üîÑ Token cleared\");}return/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:12},children:[/*#__PURE__*/_jsx(\"input\",{style:{width:520},placeholder:\"Paste JWT token here (dev)\",value:token,onChange:e=>setToken(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{style:{marginLeft:8},onClick:handleSetToken,children:\"Set Token\"}),/*#__PURE__*/_jsx(\"button\",{style:{marginLeft:8},onClick:handleClear,children:\"Clear\"}),message&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:8,color:\"#1a73e8\"},children:message}),decoded&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:10,padding:8,background:\"#f5f5f5\",borderRadius:6,width:520},children:[/*#__PURE__*/_jsx(\"b\",{children:\"Decoded Token:\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Subject (user): \",/*#__PURE__*/_jsx(\"b\",{children:decoded.sub})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Role: \",/*#__PURE__*/_jsx(\"b\",{children:decoded.role})]}),decoded.exp&&/*#__PURE__*/_jsxs(\"div\",{children:[\"Expires: \",/*#__PURE__*/_jsx(\"b\",{children:new Date(decoded.exp*1000).toLocaleString()})]})]})]});}","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","parseJwtPayload","token","base64Url","split","base64","replace","jsonPayload","decodeURIComponent","atob","map","c","charCodeAt","toString","slice","join","JSON","parse","_unused","Login","_ref","onToken","setToken","decoded","setDecoded","message","setMessage","payload","handleSetToken","trim","handleClear","style","marginBottom","children","width","placeholder","value","onChange","e","target","marginLeft","onClick","marginTop","color","padding","background","borderRadius","sub","role","exp","Date","toLocaleString"],"sources":["/workspaces/encrypted-clinical-exchange/clinician-ui/src/Login.js"],"sourcesContent":["// clinician-ui/src/Login.js\nimport React, { useState, useEffect } from 'react';\n\n// Helper: decode JWT payload (dev-only)\nfunction parseJwtPayload(token) {\n  try {\n    const base64Url = token.split('.')[1];\n    if (!base64Url) return null;\n    const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n    const jsonPayload = decodeURIComponent(\n      atob(base64)\n        .split('')\n        .map(c => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2))\n        .join('')\n    );\n    return JSON.parse(jsonPayload);\n  } catch {\n    return null;\n  }\n}\n\nexport default function Login({ onToken }) {\n  const [token, setToken] = useState('');\n  const [decoded, setDecoded] = useState(null);\n  const [message, setMessage] = useState('');\n\n  // When user types in input, decode live\n  useEffect(() => {\n    const payload = parseJwtPayload(token);\n    setDecoded(payload);\n  }, [token]);\n\n  function handleSetToken() {\n    if (!token.trim()) {\n      setMessage(\"‚ùå No token entered\");\n      onToken(\"\"); // clear token\n      return;\n    }\n\n    onToken(token);\n    setMessage(\"‚úÖ Token saved successfully!\");\n  }\n\n  function handleClear() {\n    setToken('');\n    setDecoded(null);\n    onToken('');\n    setMessage(\"üîÑ Token cleared\");\n  }\n\n  return (\n    <div style={{ marginBottom: 12 }}>\n\n      {/* Input Box */}\n      <input\n        style={{ width: 520 }}\n        placeholder=\"Paste JWT token here (dev)\"\n        value={token}\n        onChange={e => setToken(e.target.value)}\n      />\n\n      {/* Apply Token */}\n      <button style={{ marginLeft: 8 }} onClick={handleSetToken}>\n        Set Token\n      </button>\n\n      {/* Clear Token */}\n      <button style={{ marginLeft: 8 }} onClick={handleClear}>\n        Clear\n      </button>\n\n      {/* Feedback Message */}\n      {message && (\n        <div style={{ marginTop: 8, color: \"#1a73e8\" }}>\n          {message}\n        </div>\n      )}\n\n      {/* Decoded JWT Info (Optional but useful) */}\n      {decoded && (\n        <div style={{\n          marginTop: 10,\n          padding: 8,\n          background: \"#f5f5f5\",\n          borderRadius: 6,\n          width: 520\n        }}>\n          <b>Decoded Token:</b>\n          <div>Subject (user): <b>{decoded.sub}</b></div>\n          <div>Role: <b>{decoded.role}</b></div>\n          {decoded.exp && (\n            <div>Expires: <b>{new Date(decoded.exp * 1000).toLocaleString()}</b></div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}